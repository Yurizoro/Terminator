SOP_operation_category = {
	operation_dark_dawn_dec = {
		complete_effect = {
			SOP = {country_event = SOP.1}
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = 378
					num_provinces = 4
					on_win = SOP.2 
					on_lose = SOP.3
				}
				defender = {
					state = 971
					num_provinces = 1
				}
			}
		}
	}
	operation_dawn_dec = {
		war_with_target_on_remove = yes
		on_map_mode = map_only
		state_target = yes
		days_remove = 7
		visible = {
			has_completed_focus = SOP_operation_dawn
			check_variable = {
				var = count_border_war
				compare = less_than
				value = 3
			}
			has_border_war = no
		}
		available = {NOT = {has_country_flag = operation_dawn_flag}}
		target_trigger = {
			FROM = {
				AND = {
					NOT = {is_owned_by = SOP}
					any_neighbor_state = {is_owned_by = SOP}
				}	
			}
		}
		complete_effect = {
			hidden_effect = {
				set_country_flag = operation_dawn_flag
				random_owned_state = {
					limit = {any_neighbor_state = {state = FROM}}
					meta_effect = {
						text = {set_variable = {PREV.attack_state = [ID]}}
						ID = "[THIS.GetID]"
					}
				}
			}
		}
		remove_effect = {
			clr_country_flag = operation_dawn_flag
			add_to_variable = {
				var = count_border_war
				value = 1
			}	
			IF = {
				limit = {NOT = {has_country_flag = start_operation_dawn}}
				country_event = SOP.4
				set_country_flag = start_operation_dawn
			}
			else = {country_event = SOP.7}
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = var:PREV.attack_state
					num_provinces = 10
					on_win = SOP.5
					on_lose = SOP.6
				}
				defender = {
					state = FROM
					num_provinces = 100
				}
			}
		} 
	}
}

TWM_debug = {
	reset_the_border_wars_variable = {
		visible = {
			check_variable = {
				var = count_border_war
				compare = greater_than_or_equals
				value = 3
			}
		}
		complete_effect = {
			set_variable = {count_border_war = 0}
		}
	}

	reset_flag = {
		visible = {
			OR = {
				has_country_flag = operation_dawn_flag
				has_country_flag = start_operation_dawn

			}
		}
		complete_effect = {
			clr_country_flag = operation_dawn_flag
			clr_country_flag = start_operation_dawn
		}
	}
}